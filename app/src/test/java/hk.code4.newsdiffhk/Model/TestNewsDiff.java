package hk.code4.newsdiffhk.Model;

import com.google.gson.Gson;

import org.junit.Before;
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

/**
 * Created by allen517 on 22/6/15.
 */
public class TestNewsDiff {

    String json = "{\"total_revisions\": 2, \"comments_no\": 0, \"updated_at\": {\"$date\": 1430102755325}, \"_id\": {\"$oid\": \"553d8d171f6dc369447c4727\"}, \"revisions\": {\"from\": {\"version\": 0, \"body\": \"\\u6c6a\\u570b\\u771f\\u5b98\\u65b9\\u7db2\\u7ad9\\u7684\\u8ca0\\u8cac\\u4eba\\u8b49\\u5be6\\uff0c\\u8a69\\u4eba\\u6c6a\\u570b\\u771f\\u4eca\\u65e5\\u51cc\\u6668\\u56e0\\u75c5\\u901d\\u4e16\\u3002\\u6c6a\\u570b\\u771f\\u7684\\u5fae\\u535a\\u66fe\\u591a\\u6b21\\u8f49\\u767c\\u7684@\\u6c6a\\u570b\\u771f\\u5de5\\u4f5c\\u5ba4\\u8cec\\u865f\\u4e5f\\u8cbc\\u51fa\\uff1a\\u300c\\u5929\\u5992\\u82f1\\u624d\\u300d\\u4ee5\\u81f4\\u54c0\\u60bc\\u3002\\u6c6a\\u570b\\u771f\\u53bb\\u4e16\\u7684\\u6d88\\u606f\\u6700\\u65e9\\u7531\\u8a69\\u4eba\\u6f58\\u5a77\\u4eca\\u65e9\\u767c\\u51fa\\u3002\\u96a8\\u5f8c\\uff0c\\u8a69\\u4eba\\u5927\\u885e\\u4ea6\\u5728\\u5fae\\u535a\\u900f\\u9732\\uff0c\\u300c\\u4e0d\\u6562\\u76f8\\u4fe1\\uff0c\\u8a69\\u4eba\\u6c6a\\u570b\\u771f\\u4eca\\u51cc\\u6668\\u5169\\u9ede\\u5341\\u5206\\u53bb\\u4e16\\uff0c\\u525b\\u6253\\u624b\\u6a5f\\uff0c\\u63a5\\u96fb\\u8a71\\u7684\\u662f\\u4ed6\\u59b9\\u59b9\\uff0c\\u9019\\u662f\\u4e00\\u500b\\u975e\\u5e38\\u8b19\\u905c\\u7684\\u4eba\\uff0c\\u6709\\u541b\\u5b50\\u4e4b\\u98a8\\u3002\\u8207\\u4ed6\\u51fa\\u884c\\u904e\\u5e7e\\u6b21\\uff0c\\u5370\\u50cf\\u7279\\u5225\\u597d\\uff0c\\u97f3\\u5bb9\\u7b11\\u8c8c\\u4f9d\\u5728\\u2026\\u2026\\u6c92\\u6709\\u6bd4\\u8173\\u66f4\\u9577\\u7684\\u8def\\uff0c\\u6c92\\u6709\\u6bd4\\u4eba\\u66f4\\u9ad8\\u7684\\u5c71\\u3002\\u300d\\u73fe\\u5e7459\\u6b72\\u7684\\u6c6a\\u570b\\u771f\\u51fa\\u751f\\u65bc\\u5317\\u4eac\\uff0c\\u70ba\\u7576\\u4ee3\\u8a69\\u4eba\\u3001\\u66f8\\u756b\\u5bb6\\u3002\\u4e0a\\u4e16\\u7d0090\\u5e74\\u4ee3\\uff0c\\u570b\\u5167\\u66fe\\u6380\\u8d77\\u4e00\\u80a1\\u6c6a\\u570b\\u771f\\u71b1\\uff0c\\u5176\\u4ee3\\u8868\\u8a69\\u53e5\\u6709\\u300c\\u65e2\\u7136\\u9078\\u64c7\\u4e86\\u9060\\u65b9\\uff0c\\u4fbf\\u53ea\\u9867\\u98a8\\u96e8\\u517c\\u7a0b\\u300d\\u7b49\\u3002\\u53bb\\u5e74\\u4e9e\\u592a\\u7d93\\u5408\\u7d44\\u7e54(APEC)\\u5de5\\u5546\\u9818\\u5c0e\\u4eba\\u5cef\\u6703\\u4e0a\\uff0c\\u570b\\u5bb6\\u4e3b\\u5e2d\\u7fd2\\u8fd1\\u5e73\\u66fe\\u5f15\\u7528\\u4e86\\u6c6a\\u570b\\u771f\\u7684\\u8a69\\u53e5\\uff1a\\u300c\\u6c92\\u6709\\u6bd4\\u4eba\\u66f4\\u9ad8\\u7684\\u5c71\\uff0c\\u6c92\\u6709\\u6bd4\\u8173\\u66f4\\u9577\\u7684\\u8def\\u300d\\u3002\\u6c6a\\u570b\\u771f\\u53d7\\u8a2a\\u6642\\u66fe\\u8868\\u793a\\uff0c\\u7fd2\\u80fd\\u80cc\\u4e0b\\u4ed6\\u7684\\u8a69\\u8a5e\\uff0c\\u89ba\\u5f97\\u633a\\u6b23\\u6170\\uff0c\\u8aaa\\u660e\\u81ea\\u5df1\\u7684\\u8b80\\u8005\\u904d\\u4f48\\u5404\\u500b\\u968e\\u5c64\\u3001\\u5404\\u500b\\u6587\\u5316\\u5c64\\u3001\\u5404\\u500b\\u5e74\\u9f61\\u5c64\\u90fd\\u6709\\u3002\\u300a\\u5357\\u65b9\\u90fd\\u5e02\\u5831\\u300b\", \"published_at\": \"\\u5efa\\u7acb\\u6642\\u9593: 0427 08:53\", \"content\": \"<o>\\u6c6a\\u570b\\u771f\\u5b98\\u65b9\\u7db2\\u7ad9\\u7684\\u8ca0\\u8cac\\u4eba\\u8b49\\u5be6</o>\\uff0c<o>\\u8a69\\u4eba\\u6c6a\\u570b\\u771f\\u4eca\\u65e5\\u51cc\\u6668\\u56e0\\u75c5\\u901d\\u4e16\\u3002\\u6c6a\\u570b\\u771f\\u7684\\u5fae\\u535a\\u66fe\\u591a\\u6b21\\u8f49\\u767c\\u7684@\\u6c6a\\u570b\\u771f</o>\\u5de5\\u4f5c<o>\\u5ba4\\u8cec\\u865f\\u4e5f\\u8cbc</o>\\u51fa<o>\\uff1a\\u300c\\u5929\\u5992\\u82f1\\u624d\\u300d\\u4ee5\\u81f4\\u54c0\\u60bc</o>\\u3002<o>\\u6c6a\\u570b\\u771f\\u53bb\\u4e16</o>\\u7684<o>\\u6d88\\u606f\\u6700\\u65e9\\u7531\\u8a69</o>\\u4eba<o>\\u6f58\\u5a77\\u4eca\\u65e9\\u767c</o>\\u51fa<o>\\u3002</o>\\u96a8\\u5f8c<o>\\uff0c\\u8a69\\u4eba\\u5927\\u885e\\u4ea6\\u5728\\u5fae\\u535a\\u900f\\u9732\\uff0c\\u300c\\u4e0d\\u6562\\u76f8\\u4fe1\\uff0c\\u8a69\\u4eba\\u6c6a\\u570b\\u771f\\u4eca\\u51cc\\u6668\\u5169\\u9ede\\u5341\\u5206\\u53bb\\u4e16\\uff0c\\u525b\\u6253\\u624b\\u6a5f\\uff0c\\u63a5\\u96fb\\u8a71\\u7684\\u662f\\u4ed6\\u59b9\\u59b9\\uff0c\\u9019\\u662f\\u4e00\\u500b\\u975e\\u5e38\\u8b19\\u905c\\u7684\\u4eba\\uff0c\\u6709\\u541b\\u5b50\\u4e4b\\u98a8\\u3002\\u8207\\u4ed6\\u51fa\\u884c\\u904e\\u5e7e\\u6b21\\uff0c\\u5370\\u50cf\\u7279\\u5225\\u597d\\uff0c\\u97f3\\u5bb9\\u7b11\\u8c8c\\u4f9d\\u5728\\u2026\\u2026\\u6c92\\u6709\\u6bd4\\u8173\\u66f4\\u9577\\u7684\\u8def\\uff0c\\u6c92\\u6709\\u6bd4\\u4eba\\u66f4\\u9ad8\\u7684</o>\\u5c71\\u3002<o>\\u300d\\u73fe\\u5e7459\\u6b72\\u7684\\u6c6a\\u570b\\u771f\\u51fa\\u751f\\u65bc</o>\\u5317\\u4eac<o>\\uff0c\\u70ba\\u7576\\u4ee3\\u8a69\\u4eba\\u3001\\u66f8\\u756b\\u5bb6\\u3002\\u4e0a\\u4e16\\u7d0090\\u5e74\\u4ee3\\uff0c\\u570b\\u5167\\u66fe\\u6380\\u8d77\\u4e00\\u80a1\\u6c6a\\u570b\\u771f\\u71b1\\uff0c\\u5176\\u4ee3\\u8868\\u8a69\\u53e5\\u6709\\u300c\\u65e2\\u7136\\u9078\\u64c7\\u4e86\\u9060\\u65b9\\uff0c\\u4fbf\\u53ea\\u9867\\u98a8\\u96e8\\u517c\\u7a0b\\u300d\\u7b49\\u3002\\u53bb\\u5e74\\u4e9e\\u592a\\u7d93\\u5408\\u7d44\\u7e54(APEC)\\u5de5\\u5546\\u9818\\u5c0e\\u4eba\\u5cef\\u6703\\u4e0a\\uff0c\\u570b\\u5bb6\\u4e3b\\u5e2d\\u7fd2\\u8fd1\\u5e73\\u66fe\\u5f15\\u7528\\u4e86\\u6c6a\\u570b\\u771f\\u7684\\u8a69\\u53e5\\uff1a\\u300c\\u6c92\\u6709\\u6bd4\\u4eba\\u66f4\\u9ad8\\u7684\\u5c71\\uff0c\\u6c92\\u6709\\u6bd4\\u8173\\u66f4\\u9577\\u7684\\u8def\\u300d\\u3002\\u6c6a\\u570b\\u771f\\u53d7\\u8a2a</o>\\u6642<o>\\u66fe\\u8868\\u793a\\uff0c\\u7fd2\\u80fd\\u80cc\\u4e0b\\u4ed6\\u7684\\u8a69\\u8a5e\\uff0c\\u89ba\\u5f97\\u633a\\u6b23\\u6170\\uff0c\\u8aaa\\u660e\\u81ea\\u5df1\\u7684\\u8b80\\u8005\\u904d\\u4f48\\u5404\\u500b\\u968e\\u5c64\\u3001\\u5404\\u500b\\u6587\\u5316\\u5c64\\u3001\\u5404\\u500b\\u5e74\\u9f61\\u5c64\\u90fd\\u6709\\u3002\\u300a\\u5357\\u65b9\\u90fd\\u5e02</o>\\u5831\\u300b\", \"archive_time\": {\"$date\": 1430097175246}, \"title\": \"\\u7576\\u4ee3\\u8a69\\u4eba\\u6c6a\\u570b\\u771f\\u75c5\\u901d \\u8a69\\u53e5\\u66fe\\u88ab\\u7fd2\\u8fd1\\u5e73\\u5f15\\u7528\"}, \"to\": {\"version\": 1, \"body\": \"\\u4e00\\u540d\\u5916\\u7c4d\\u7537\\u5b50\\u5728\\u5317\\u4eac\\u61f7\\u67d4\\u6c34\\u9577\\u57ce\\u9644\\u8fd1\\uff0c\\u6500\\u722c\\u91ce\\u9577\\u57ce\\u6642\\u8ff7\\u8def\\uff0c\\u7576\\u98df\\u7269\\u8017\\u76e1\\u5f8c\\uff0c\\u4ed6\\u6c42\\u52a9\\u5927\\u4f7f\\u9928\\u5de5\\u4f5c\\u4eba\\u54e1\\u5831\\u8b66\\u3002\\u524d\\u65e5\\u4e0b\\u53481\\u6642\\u8a31\\uff0c\\u61f7\\u67d4\\u8b66\\u65b9\\u53ca\\u6642\\u71df\\u6551\\uff0c\\u8a72\\u5916\\u7c4d\\u7537\\u5b50\\u6700\\u7d42\\u5f97\\u4ee5\\u812b\\u96aa\\u3002\\u64da\\u6089\\uff0c\\u8a72\\u5916\\u7c4d\\u7537\\u5b50\\u65bc\\u4e0a\\u5468\\u56db(23\\u65e5)\\u4e0a\\u5348\\u5f9e\\u9ec3\\u82b1\\u57ce\\u6c34\\u9577\\u57ce\\u5340\\u57df\\u5357\\u5074\\u7684\\u897f\\u6c34\\u5cea\\u6751\\u6500\\u722c\\u91ce\\u9577\\u57ce\\uff0c2\\u65e5\\u5f8c\\u7531\\u65bc\\u8ff7\\u5931\\u65b9\\u5411\\uff0c\\u52a0\\u4e0a\\u9ad4\\u529b\\u4e0d\\u652f\\u548c\\u6240\\u5e36\\u98df\\u7269\\u8017\\u76e1\\uff0c\\u56f0\\u65bc\\u91ce\\u9577\\u57ce\\u4e0a\\u3002\\u7531\\u65bc\\u88ab\\u56f0\\u7537\\u5b50\\u6500\\u722c\\u6642\\u9593\\u8f03\\u9577\\uff0c\\u53ef\\u80fd\\u5df2\\u7d93\\u96e2\\u958b\\u9ec3\\u82b1\\u57ce\\u6c34\\u9577\\u57ce\\u5340\\u57df\\uff0c\\u6551\\u63f4\\u4eba\\u54e1\\u5982\\u679c\\u6309\\u7167\\u88ab\\u56f0\\u8005\\u7684\\u6500\\u722c\\u8def\\u7dda\\u53bb\\u5c0b\\u627e\\uff0c\\u53ef\\u80fd\\u6703\\u932f\\u904e\\u6700\\u4f73\\u7684\\u6551\\u63f4\\u6642\\u6a5f\\u3002\\u65bc\\u662f\\uff0c\\u6551\\u63f4\\u4eba\\u54e1\\u901a\\u904e\\u88ab\\u56f0\\u8005\\u6240\\u63cf\\u8ff0\\u7684\\u5927\\u6982\\u4f4d\\u7f6e\\uff0c\\u5617\\u8a66\\u524d\\u5f80\\u6e24\\u6d77\\u93ae\\u8f44\\u5340\\u9032\\u884c\\u6551\\u63f4\\u3002\\u7576\\u65e5\\u4e0b\\u53483\\u664221\\u5206\\uff0c\\u6d88\\u9632\\u3001\\u6cbb\\u5b89\\u3001\\u6e24\\u6d77\\u6d3e\\u51fa\\u6240\\u6551\\u63f4\\u4eba\\u54e1\\u8d95\\u81f3\\uff0c\\u7531\\u65bc\\u5c71\\u8def\\u9661\\u5ced\\uff0c\\u4e00\\u4e9b\\u8def\\u6bb5\\u5bec\\u5ea6\\u4e0d\\u8db31\\u7c73\\uff0c\\u641c\\u6551\\u904e\\u7a0b\\u975e\\u5e38\\u8271\\u96aa\\u3002\\u7d93\\u904e\\u7d04\\u4e00\\u500b\\u534a\\u5c0f\\u6642\\u7684\\u6500\\u722c\\uff0c\\u4e0b\\u53485\\u6642\\u8a31\\uff0c\\u6551\\u63f4\\u4eba\\u54e1\\u7d42\\u65bc\\u627e\\u5230\\u4e86\\u88ab\\u56f0\\u8005\\u7684\\u4f4d\\u7f6e\\u3002\\u8a72\\u5916\\u7c4d\\u7537\\u5b50\\u5df2\\u51fa\\u73fe\\u812b\\u6c34\\u75c7\\u72c0\\uff0c\\u6551\\u63f4\\u4eba\\u54e1\\u7acb\\u5373\\u5c07\\u96a8\\u8eab\\u651c\\u5e36\\u7684\\u98f2\\u7528\\u6c34\\u7d66\\u4ed6\\u559d\\u4e0b\\uff0c\\u96a8\\u5f8c\\u6519\\u6276\\u5176\\u7de9\\u6162\\u4e0b\\u5c71\\u3002\\u5b89\\u5168\\u5230\\u9054\\u5c71\\u8173\\u4e0b\\u5f8c\\u812b\\u96aa\\u3002\\u5317\\u4eac\\u300a\\u4eac\\u83ef\\u6642\\u5831\\u300b\", \"published_at\": \"\\u5efa\\u7acb\\u6642\\u9593: 0427 08:53\", \"content\": \"<c>\\u4e00\\u540d\\u5916\\u7c4d\\u7537\\u5b50\\u5728\\u5317\\u4eac\\u61f7\\u67d4\\u6c34\\u9577\\u57ce\\u9644\\u8fd1</c>\\uff0c<c>\\u6500\\u722c\\u91ce\\u9577\\u57ce\\u6642\\u8ff7\\u8def\\uff0c\\u7576\\u98df\\u7269\\u8017\\u76e1\\u5f8c\\uff0c\\u4ed6\\u6c42\\u52a9\\u5927\\u4f7f\\u9928</c>\\u5de5\\u4f5c<c>\\u4eba\\u54e1\\u5831\\u8b66\\u3002\\u524d\\u65e5\\u4e0b\\u53481\\u6642\\u8a31\\uff0c\\u61f7\\u67d4\\u8b66\\u65b9\\u53ca\\u6642\\u71df\\u6551\\uff0c\\u8a72\\u5916\\u7c4d\\u7537\\u5b50\\u6700\\u7d42\\u5f97\\u4ee5\\u812b\\u96aa\\u3002\\u64da\\u6089\\uff0c\\u8a72\\u5916\\u7c4d\\u7537\\u5b50\\u65bc\\u4e0a\\u5468\\u56db(23\\u65e5)\\u4e0a\\u5348\\u5f9e\\u9ec3\\u82b1\\u57ce\\u6c34\\u9577\\u57ce\\u5340\\u57df\\u5357\\u5074\\u7684\\u897f\\u6c34\\u5cea\\u6751\\u6500\\u722c\\u91ce\\u9577\\u57ce\\uff0c2\\u65e5\\u5f8c\\u7531\\u65bc\\u8ff7\\u5931\\u65b9\\u5411\\uff0c\\u52a0\\u4e0a\\u9ad4\\u529b\\u4e0d\\u652f\\u548c\\u6240\\u5e36\\u98df\\u7269\\u8017\\u76e1\\uff0c\\u56f0\\u65bc\\u91ce\\u9577\\u57ce\\u4e0a\\u3002\\u7531\\u65bc\\u88ab\\u56f0\\u7537\\u5b50\\u6500\\u722c\\u6642\\u9593\\u8f03\\u9577\\uff0c\\u53ef\\u80fd\\u5df2\\u7d93\\u96e2\\u958b\\u9ec3\\u82b1\\u57ce\\u6c34\\u9577\\u57ce\\u5340\\u57df\\uff0c\\u6551\\u63f4\\u4eba\\u54e1\\u5982\\u679c\\u6309\\u7167\\u88ab\\u56f0\\u8005\\u7684\\u6500\\u722c\\u8def\\u7dda\\u53bb\\u5c0b\\u627e\\uff0c\\u53ef\\u80fd\\u6703\\u932f\\u904e\\u6700\\u4f73\\u7684\\u6551\\u63f4\\u6642\\u6a5f\\u3002\\u65bc\\u662f\\uff0c\\u6551\\u63f4\\u4eba\\u54e1\\u901a\\u904e\\u88ab\\u56f0\\u8005\\u6240\\u63cf\\u8ff0\\u7684\\u5927\\u6982\\u4f4d\\u7f6e\\uff0c\\u5617\\u8a66\\u524d\\u5f80\\u6e24\\u6d77\\u93ae\\u8f44\\u5340\\u9032\\u884c\\u6551\\u63f4\\u3002\\u7576\\u65e5\\u4e0b\\u53483\\u664221\\u5206\\uff0c\\u6d88\\u9632\\u3001\\u6cbb\\u5b89\\u3001\\u6e24\\u6d77\\u6d3e</c>\\u51fa<c>\\u6240\\u6551\\u63f4\\u4eba\\u54e1\\u8d95\\u81f3\\uff0c\\u7531\\u65bc\\u5c71\\u8def\\u9661\\u5ced\\uff0c\\u4e00\\u4e9b\\u8def\\u6bb5\\u5bec\\u5ea6\\u4e0d\\u8db31\\u7c73\\uff0c\\u641c\\u6551\\u904e\\u7a0b\\u975e\\u5e38\\u8271\\u96aa</c>\\u3002<c>\\u7d93\\u904e\\u7d04\\u4e00\\u500b\\u534a\\u5c0f\\u6642</c>\\u7684<c>\\u6500\\u722c\\uff0c\\u4e0b\\u53485\\u6642\\u8a31\\uff0c\\u6551\\u63f4</c>\\u4eba<c>\\u54e1\\u7d42\\u65bc\\u627e\\u5230\\u4e86\\u88ab\\u56f0\\u8005\\u7684\\u4f4d\\u7f6e\\u3002\\u8a72\\u5916\\u7c4d\\u7537\\u5b50\\u5df2</c>\\u51fa<c>\\u73fe\\u812b\\u6c34\\u75c7\\u72c0\\uff0c\\u6551\\u63f4\\u4eba\\u54e1\\u7acb\\u5373\\u5c07\\u96a8\\u8eab\\u651c\\u5e36\\u7684\\u98f2\\u7528\\u6c34\\u7d66\\u4ed6\\u559d\\u4e0b\\uff0c</c>\\u96a8\\u5f8c<c>\\u6519\\u6276\\u5176\\u7de9\\u6162\\u4e0b</c>\\u5c71\\u3002<c>\\u5b89\\u5168\\u5230\\u9054\\u5c71\\u8173\\u4e0b\\u5f8c\\u812b\\u96aa\\u3002</c>\\u5317\\u4eac<c>\\u300a\\u4eac\\u83ef</c>\\u6642\\u5831\\u300b\", \"archive_time\": {\"$date\": 1430102755336}, \"title\": \"\\u5916\\u7c4d\\u7537\\u722c\\u91ce\\u9577\\u57ce\\u8569\\u5931\\u8def \\u88ab\\u56f02\\u65e5\\u7f3a\\u7ce7\\u6c34\"}}, \"url\": \"http://hk.apple.nextmedia.com/realtime/china/20150427/53677179\", \"last_check\": {\"$date\": 1430755415026}, \"title\": \"\\u5916\\u7c4d\\u7537\\u722c\\u91ce\\u9577\\u57ce\\u8569\\u5931\\u8def \\u88ab\\u56f02\\u65e5\\u7f3a\\u7ce7\\u6c34\", \"publisher\": \"apple\", \"created_at\": {\"$date\": 1430097175245}, \"changes\": 0.9195266272189349, \"lang\": \"zh_Hant\"}";

    @Before
    public void setUp() throws Exception {

    }

    @Test
    public void testGson() throws Exception {
        Gson gson = new Gson();
        NewsDiff data = gson.fromJson(json, NewsDiff.class);

        assertEquals("553d8d171f6dc369447c4727", data.getId());
        assertEquals(0, data.getCommentsNo());
        assertEquals(1430755415026L, data.getLastCheck().getLong());
        assertEquals(0, data.getRevisions().getFrom().getVersion());
        assertEquals(1, data.getRevisions().getTo().getVersion());
        assertEquals("建立時間: 0427 08:53", data.getRevisions().getTo().getPublishedAt());
//        assertEquals(1430097175246L, data.getRevisions().getFrom().getArchiveTime().getLong());
        assertEquals("外籍男爬野長城蕩失路 被困2日缺糧水", data.getTitle());
        assertEquals("apple", data.getPublisher());
        assertEquals("zh_Hant", data.getLang());
        assertTrue(0.9195266272189349 == data.getChanges());
    }
}
